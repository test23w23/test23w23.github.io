<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìå –î–æ—Å–∫–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; padding: 20px; 
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { text-align: center; color: white; margin: 20px 0 40px; font-size: 2.5em; }
        .upload-zone { 
            background: white; border: 3px dashed #ccc; border-radius: 15px; 
            padding: 40px; text-align: center; cursor: pointer; margin-bottom: 30px; 
            transition: all 0.3s;
        }
        .upload-zone:hover { border-color: #ff6b6b; background: #ffeaea; }
        .upload-zone.drag { border-color: #ff4444; background: #ffeeee; transform: scale(1.02); }
        .upload-zone p { font-size: 1.3em; color: #666; margin: 10px 0; }
        input[type="file"] { display: none; }
        .board { 
            background: white; border-radius: 15px; padding: 30px; 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
            gap: 20px; 
        }
        .file-item { 
            border: 2px solid #eee; border-radius: 10px; padding: 20px; 
            text-align: center; cursor: pointer; transition: all 0.3s;
        }
        .file-item:hover { 
            border-color: #ff6b6b; transform: translateY(-5px); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .file-thumb { font-size: 3em; margin-bottom: 15px; }
        .file-name { font-weight: bold; margin-bottom: 5px; font-size: 1.1em; }
        .file-info { color: #888; font-size: 0.9em; }
        .count { 
            position: fixed; top: 20px; right: 20px; 
            background: rgba(255,255,255,0.9); padding: 15px 25px; 
            border-radius: 25px; font-weight: bold; color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìå –î–æ—Å–∫–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π</h1>
        <div class="count" id="count">–§–∞–π–ª–æ–≤: 0</div>
        
        <!-- üî• –ù–ê–°–¢–†–û–ô–¢–ï –¢–û–õ–¨–ö–û –≠–¢–ò 3 –°–¢–†–û–ö–ò üî• -->
        <script>
            GITHUB_CONFIG = {
                owner: 'ea.troitskaya@mail.ru',     // ‚Üê –∑–∞–º–µ–Ω–∏—Ç–µ
                repo: 'test23w23.github.io',       // ‚Üê –∑–∞–º–µ–Ω–∏—Ç–µ  
                token: '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'   // ‚Üê –∑–∞–º–µ–Ω–∏—Ç–µ
            };
        </script>
        
        <div class="upload-zone" id="uploadZone">
            <p>üìÅ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ PDF, PPT —Å—é–¥–∞</p>
            <p style="font-size: 1.1em; color: #333;">–∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
            <input type="file" id="fileInput" multiple accept=".pdf,.ppt,.pptx">
        </div>
        
        <div class="board" id="board"></div>
    </div>

    <script>
        // ‚≠ê –ë–ï–ó–û–ü–ê–°–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        const els = {
            zone: document.getElementById('uploadZone'),
            input: document.getElementById('fileInput'),
            board: document.getElementById('board'),
            count: document.getElementById('count')
        };
        
        let fileList = []; // ‚≠ê –û–î–ò–ù –ú–ê–°–°–ò–í

        // ‚≠ê Drag & Drop - –°–ê–ú–´–ô –ü–†–û–°–¢–û–ô
        els.zone.addEventListener('dragover', e => {
            e.preventDefault();
            els.zone.classList.add('drag');
        });
        
        els.zone.addEventListener('dragleave', e => {
            e.preventDefault();
            els.zone.classList.remove('drag');
        });
        
        els.zone.addEventListener('drop', e => {
            e.preventDefault();
            els.zone.classList.remove('drag');
            addFiles(e.dataTransfer.files);
        });
        
        // ‚≠ê –ö–ª–∏–∫
        els.zone.addEventListener('click', () => els.input.click());
        els.input.addEventListener('change', e => {
            addFiles(e.target.files);
            e.target.value = '';
        });

        // ‚≠ê –î–û–ë–ê–í–õ–ï–ù–ò–ï –§–ê–ô–õ–û–í
        async function addFiles(files) {
            for (let file of Array.from(files)) {
                if (!/\.(pdf|ppt|pptx)$/i.test(file.name)) {
                    alert('–¢–æ–ª—å–∫–æ PDF, PPT, PPTX');
                    continue;
                }
                if (file.size > 20*1024*1024) {
                    alert(file.name + ' > 20MB');
                    continue;
                }
                
                try {
                    showStatus('–ó–∞–≥—Ä—É–∑–∫–∞ ' + file.name + '...');
                    const url = await githubUpload(file);
                    
                    fileList.unshift({
                        name: file.name,
                        size: file.size,
                        url: url,
                        date: Date.now()
                    });
                    
                    showBoard();
                } catch(e) {
                    alert('–û—à–∏–±–∫–∞: ' + e.message);
                }
            }
        }

        // ‚≠ê GitHub –ó–ê–ì–†–£–ó–ö–ê
        async function githubUpload(file) {
            const cfg = GITHUB_CONFIG;
            
            const safeName = file.name.replace(/[^a-z0-9.-]/gi, '_');
            const path = `uploads/${Date.now()}_${safeName}`;
            
            const buffer = await file.arrayBuffer();
            const content = btoa(String.fromCharCode(...new Uint8Array(buffer)));
            
            const response = await fetch(
                `https://api.github.com/repos/${cfg.owner}/${cfg.repo}/contents/${path}`,
                {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${cfg.token}`,
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: '–§–∞–π–ª —Å –¥–æ—Å–∫–∏',
                        content: content
                    })
                }
            );
            
            if (!response.ok) {
                const err = await response.json();
                throw new Error(err.message || 'GitHub error');
            }
            
            return `https://raw.githubusercontent.com/${cfg.owner}/${cfg.repo}/main/${path}`;
        }

        // ‚≠ê –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï
        function showBoard() {
            els.board.innerHTML = '';
            
            fileList.slice(0, 30).reverse().forEach(f => {
                const item = document.createElement('div');
                item.className = 'file-item';
                item.innerHTML = `
                    <div class="file-thumb">${icon(f.name)}</div>
                    <div class="file-name">${f.name}</div>
                    <div class="file-info">${size(f.size)}</div>
                `;
                item.onclick = () => window.open(f.url, '_blank');
                els.board.appendChild(item);
            });
            
            els.count.textContent = `–§–∞–π–ª–æ–≤: ${fileList.length}`;
        }

        // ‚≠ê –£–¢–ò–õ–ò–¢–´
        function icon(name) {
            const ext = name.split('.').pop().toLowerCase();
            return {pdf:'üìÑ', ppt:'üìä', pptx:'üìä'}[ext] || 'üìé';
        }
        
        function size(bytes) {
            if (bytes < 1024) return bytes + 'B';
            if (bytes < 1024*1024) return (bytes/1024).toFixed(1) + 'KB';
            return (bytes/1024/1024).toFixed(1) + 'MB';
        }
        
        function showStatus(text) {
            let status = document.getElementById('status');
            if (!status) {
                status = document.createElement('div');
                status.id = 'status';
                status.style.cssText = `
                    position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
                    background:rgba(0,0,0,0.9);color:white;padding:20px 30px;
                    border-radius:10px;z-index:9999;font-size:16px;
                `;
                document.body.appendChild(status);
            }
            status.textContent = text;
        }

        // ‚≠ê –°–¢–ê–†–¢
        showBoard();
    </script>
</body>
</html>





